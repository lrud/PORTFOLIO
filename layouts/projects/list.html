{{ define "main" }}
<main style="background: #f7f7fa; min-height: 80vh; padding: 32px 0; overflow: visible;">
  <h1 style="font-size:2em;font-weight:bold;color:#222;margin-bottom:32px;text-align:center;">Projects</h1>
  <div class="projects-container">
    {{ $thesis := where .Pages "File.BaseFileName" "thesis" }}
    {{ $credit := where .Pages "File.BaseFileName" "credit-market" }}
    {{ $vpoc := where .Pages "File.BaseFileName" "es-vpoc" }}
    {{ range $thesis }}
      <div style="display:flex;flex-direction:row;align-items:center;width:100%;">
        <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;margin-right:4px;">
          <span style="writing-mode:vertical-rl;transform:rotate(180deg);font-size:0.9em;color:#6b7280;letter-spacing:2px;">← Scroll</span>
        </div>
        <div class="project-box" style="flex:1; position: relative;">
        <h2 class="project-title">{{ .Title }}</h2>
        <span class="project-status">{{ .Params.status }}</span>
        {{ with .Params.subtitle }}<div class="project-subtitle">{{ . }}</div>{{ end }}
        {{ with .Params.overview }}<div class="project-overview">{{ . }}</div>{{ end }}
        
        {{ with .Params.research_objective }}
          <div class="project-section-title">Research Objective</div>
          <div class="project-content">{{ . }}</div>
        {{ end }}
        
        {{ with .Params.dependent_variable }}
          <div class="project-section-title">Dependent Variable</div>
          <div class="project-content"><strong>{{ .name }}:</strong> {{ .period }} ({{ .source }})</div>
        {{ end }}
        
        {{ if .Params.core_predictors }}
          <div class="project-section-title">Core Predictors</div>
          <ul style="list-style-type: disc; list-style-position: inside; padding-left: 1rem; margin: 0.5rem 0;">
            {{ range .Params.core_predictors }}
              <li style="display: list-item; margin-bottom: 0.5rem;">
                <strong>{{ .name }}:</strong> {{ .description }}
                {{ with .justification }}<br><em>Academic Justification:</em> {{ . }}{{ end }}
              </li>
            {{ end }}
          </ul>
        {{ end }}
        
        {{ if .Params.academic_contributions }}
          <div class="project-section-title">Academic Contributions</div>
          <ul style="list-style-type: disc; list-style-position: inside; padding-left: 1rem; margin: 0.5rem 0;">
            {{ range .Params.academic_contributions }}
              <li style="display: list-item; margin-bottom: 0.25rem;">{{ . }}</li>
            {{ end }}
          </ul>
        {{ end }}
        
        {{ if .Params.validation_framework }}
          <div class="project-section-title">Validation Framework</div>
          <ul style="list-style-type: disc; list-style-position: inside; padding-left: 1rem; margin: 0.5rem 0;">
            {{ range .Params.validation_framework }}
              <li style="display: list-item; margin-bottom: 0.25rem;">{{ . }}</li>
            {{ end }}
          </ul>
        {{ end }}
        {{ with .Params.technologies }}<div class="project-section-title">Technologies Used</div><div class="project-technologies">{{ . }}</div>{{ end }}
        {{ with .Params.potential_applications }}
          <div class="project-section-title">Potential Applications</div>
          <ul class="project-applications">
            {{ range . }}<li>{{ . }}</li>{{ end }}
          </ul>
        {{ end }}
        {{ if .Params.github }}
          <a href="{{ .Params.github }}" target="_blank" class="project-github">GitHub</a>
        {{ else }}
          <button class="project-github disabled" disabled>GitHub link soon</button>
        {{ end }}
        <!-- No carousel for thesis -->
        </div>
      </div>
    {{ end }}
    {{ range $credit }}
      <div style="display:flex;flex-direction:row;align-items:center;width:100%;">
        <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;margin-right:4px;">
          <span style="writing-mode:vertical-rl;transform:rotate(180deg);font-size:0.9em;color:#6b7280;letter-spacing:2px;">← Scroll</span>
        </div>
        <div class="project-box" style="flex:1; position: relative;">
        <h2 class="project-title">{{ .Title }}</h2>
        <span class="project-status">{{ .Params.status }}</span>
        {{ with .Params.subtitle }}<div class="project-subtitle">{{ . }}</div>{{ end }}
        {{ with .Params.overview }}<div class="project-overview">{{ . }}</div>{{ end }}
        {{ with .Params.objectives }}
          <div class="project-section-title">Objectives</div>
          <ul class="project-objectives">
            {{ range . }}<li>{{ . }}</li>{{ end }}
          </ul>
        {{ end }}
        {{ with .Params.technologies }}
          <div class="project-section-title">Technologies Used</div>
          <div class="project-technologies">{{ . }}</div>
        {{ end }}
        {{ with .Params.github }}
          <a href="{{ . }}" target="_blank" class="project-github">GitHub</a>
        {{ end }}
  <div style="width:100%;margin-top:16px;">{{ .Content }}</div>
        </div>
      </div>
    {{ end }}
    {{ range $vpoc }}
      <div style="display:flex;flex-direction:row;align-items:center;width:100%;">
        <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;margin-right:4px;">
          <span style="writing-mode:vertical-rl;transform:rotate(180deg);font-size:0.9em;color:#6b7280;letter-spacing:2px;">← Scroll</span>
        </div>
        <div class="project-box" style="flex:1; position: relative;">
        <h2 class="project-title">{{ .Title }}</h2>
        <span class="project-status">{{ .Params.status }}</span>
        {{ with .Params.subtitle }}<div class="project-subtitle">{{ . }}</div>{{ end }}
        {{ with .Params.overview }}<div class="project-overview">{{ . }}</div>{{ end }}
        {{ with .Params.objectives }}
          <div class="project-section-title">Objectives</div>
          <ul class="project-objectives">
            {{ range . }}<li>{{ . }}</li>{{ end }}
          </ul>
        {{ end }}
        {{ with .Params.technologies }}<div class="project-section-title">Technologies Used</div><div class="project-technologies">{{ . }}</div>{{ end }}
        {{ with .Params.github }}
          <a href="{{ . }}" target="_blank" class="project-github">GitHub</a>
        {{ end }}
  <div style="width:100%;margin-top:16px;">{{ .Content }}</div>
        </div>
      </div>
    {{ end }}
  </div>
</main>
{{ end }}
