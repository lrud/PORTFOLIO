{{ $project := .Get "project" | default "credit-market-volatility-research" }}
{{ $images := slice }}
{{ if eq $project "credit-market-volatility-research" }}
  {{ $images = slice "Stats_of_Key_Variables.png" "Stats_by_Asset.png" "Panel_Data.png" "Quintile_Regression_Bitcoin.png" "Quintile_Regression_Nasdaq.png" "py_plot_L_baa_aaa_spread.png" "py_plot_L_treasury_spread.png" "py_plot_L_implied_vol.png" "py_plot_L_neg_log_ret.png" }}
{{ else if eq $project "futures_vpoc_backtest" }}
  {{ $images = slice "strategy_comparison.png" }}
{{ end }}
{{ if eq $project "futures_vpoc_backtest" }}
  <div style="max-width:800px;margin:auto;text-align:center;">
    <img src="/images/projects/{{ $project }}/{{ index $images 0 }}" alt="{{ index $images 0 }}" style="max-width:100%;max-height:200px;height:auto;object-fit:contain;cursor:pointer;" onclick="openModal(this.src, this.alt)">
  </div>
{{ else }}
  <div class="glider-contain" style="max-width:800px;margin:auto;">
    <div class="glider" style="height:220px;display:flex;align-items:center;">
      {{ range $img := $images }}
        <img src="/images/projects/{{ $project }}/{{ $img }}" alt="{{ $img }}" style="max-width:100%;max-height:200px;height:auto;object-fit:contain;cursor:pointer;" onclick="openModal(this.src, this.alt)">
      {{ end }}
    </div>
    <button aria-label="Previous" class="glider-prev">«</button>
    <button aria-label="Next" class="glider-next">»</button>
    <!-- Removed dots for page indicators -->
  </div>
{{ end }}
<!-- Modal for enlarged image -->
<div id="carouselModal" style="display:none;position:fixed;z-index:9999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.85);align-items:center;justify-content:center;">
  <img id="modalImg" src="" alt="" style="max-width:90vw;max-height:90vh;box-shadow:0 0 32px #000;display:block;margin:auto;">
</div>
<script>
function openModal(src, alt) {
  var modal = document.getElementById('carouselModal');
  var img = document.getElementById('modalImg');
  img.src = src;
  img.alt = alt;
  modal.style.display = 'flex';
}
document.addEventListener('DOMContentLoaded', function() {
  var modal = document.getElementById('carouselModal');
  modal.addEventListener('click', function(e) {
    if (e.target === modal || e.target === document.getElementById('modalImg')) {
      modal.style.display = 'none';
    }
  });
  document.addEventListener('keydown', function(e) {
    if (modal.style.display === 'flex' && e.key === 'Escape') {
      modal.style.display = 'none';
    }
  });
});
</script>
